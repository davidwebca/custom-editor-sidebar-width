{"version":3,"sources":["webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"plugins\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external [\"wp\",\"editPost\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"domReady\"]","webpack:///external [\"wp\",\"api\"]","webpack:///external \"lodash\"","webpack:///./src/scripts/app.js"],"names":["window","initialWidthValue","loadPromise","models","fetch","then","response","meta","editor_width","document","documentElement","style","setProperty","SidebarWidthRangeControl","props","state","value","initialValue","debouncedSave","debounce","width","save","setState","setWidth","RangeControl","label","onChange","this","min","max","Component","arrow_icon","height","viewBox","d","registerPlugin","render","Fragment","PluginSidebarMoreMenuItem","target","icon","__","PluginSidebar","name","title","Panel","PanelBody"],"mappings":"yIAAI,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAY,SCAtD,GCA+BA,OAAW,GAAY,SDAvBA,OAAW,GAAc,YEAxD,EAA+BA,OAAW,GAAO,ICAjD,EAA+BA,OAAe,O,wbCiBlD,IAAIC,EAAoB,IAGxBC,oBAAkB,YACC,IAAIC,kBACNC,QAAQC,MAAM,SAACC,GACrBA,EAASC,KAAKC,eACbP,EAAoBK,EAASC,KAAKC,aAClCC,SAASC,gBAAgBC,MAAMC,YAAY,uBAAwBN,EAASC,KAAKC,aAAe,a,IAKtGK,E,oCACF,WAAaC,GAAQ,6BACjB,cAAOA,IACFC,MAAQ,CACTC,MAAOF,EAAMG,cAGjB,EAAKC,eAAgBC,eAAU,SAACC,GAChB,IAAIjB,iBAAe,CAC3BI,KAAM,CACF,aAAea,KAGjBC,OAAOhB,MAAM,SAACC,GAChB,EAAKgB,SAAS,CAACN,MAAMV,EAASC,KAAKC,eACnCP,EAAoBK,EAASC,KAAKC,gBAEtC,EAAKe,SAASH,KACf,KAjBc,E,gDAoBrB,WAAoB,WAChBlB,oBAAkB,YACK,IAAIC,kBACVC,QAAQC,MAAM,SAACC,GACrBA,EAASC,KAAKC,eACb,EAAKc,SAAS,CAACN,MAAMV,EAASC,KAAKC,eACnC,EAAKe,SAASjB,EAASC,KAAKC,uB,sBAM5C,SAASY,GACLX,SAASC,gBAAgBC,MAAMC,YAAY,uBAAwBQ,EAAQ,Q,oBAG/E,WAAS,WACL,OAAQ,mBAAC,EAAAI,aAAD,CACJC,MAAM,QACNC,SAAW,SAACN,GACR,EAAKE,SAAS,CAACN,MAAMI,IACrB,EAAKF,cAAcE,IAEvBJ,MAAQW,KAAKZ,MAAMC,MACnBY,IAAM,IACNC,IAAM,U,GA9CqBC,aAmDnCC,GAAa,0BAAKX,MAAM,KAAKY,OAAO,KAAKC,QAAQ,cAAY,2BAAMC,EAAE,4SAkBzEC,oBAAgB,uBAAwB,CAAEC,OAfT,kBAC7B,mBAAC,EAAAC,SAAD,MACI,mBAAC,EAAAC,0BAAD,CAA2BC,OAAO,uBAAuBC,KAAOT,IAC/DU,QAAG,gBAAiB,UAErB,mBAAC,EAAAC,cAAD,CAAeC,KAAK,uBAAuBC,OAAQH,QAAG,gBAAiB,QAAUD,KAAOT,IACpF,mBAAC,EAAAc,MAAD,MACI,mBAAC,EAAAC,UAAD,MACI,mBAACjC,EAAD,CAA0BI,aAAchB,a","file":"/scripts/app.js","sourcesContent":["var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editPost\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"domReady\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"api\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","import { registerPlugin } from '@wordpress/plugins';\nimport { Fragment, Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { PluginSidebar, PluginSidebarMoreMenuItem } from '@wordpress/edit-post';\nimport domReady from '@wordpress/dom-ready';\nimport { \n    RangeControl, \n    Panel,\n    PanelBody,\n    PanelRow\n} from '@wordpress/components';\nimport {\n    loadPromise,\n    models\n} from '@wordpress/api';\nimport { debounce } from 'lodash';\n\nlet initialWidthValue = 280;\nlet current_user = null;\n\nloadPromise.then( () => {\n    current_user = new models.UsersMe();\n    current_user.fetch().then( (response) => {\n        if(response.meta.editor_width) {\n            initialWidthValue = response.meta.editor_width;\n            document.documentElement.style.setProperty('--cesw-sidebar-width', response.meta.editor_width + 'px');\n        }\n    });\n});\n\nclass SidebarWidthRangeControl extends Component {\n    constructor( props ) {\n        super( props )\n        this.state = {\n            value: props.initialValue\n        }\n\n        this.debouncedSave = debounce( (width) => {\n            let model = new models.UsersMe({\n                meta: {\n                    'editor_width':width\n                }\n            });\n            model.save().then( (response) => {\n                this.setState({value:response.meta.editor_width})\n                initialWidthValue = response.meta.editor_width;\n            })\n            this.setWidth(width);\n        }, 500)\n    }\n\n    componentDidMount() {\n        loadPromise.then( () => {\n            let current_user = new models.UsersMe();\n            current_user.fetch().then( (response) => {\n                if(response.meta.editor_width) {\n                    this.setState({value:response.meta.editor_width})\n                    this.setWidth(response.meta.editor_width)\n                }\n            })\n        })\n    }\n\n    setWidth(width) {\n        document.documentElement.style.setProperty('--cesw-sidebar-width', width + 'px');\n    }\n\n    render() {\n        return (<RangeControl\n            label=\"Width\"\n            onChange={ (width) => {\n                this.setState({value:width})\n                this.debouncedSave(width);\n            } }\n            value={ this.state.value }\n            min={ 280 }\n            max={ 680 }\n        />)\n    }\n}\n\nlet arrow_icon = <svg width=\"33\" height=\"18\" viewBox=\"0 0 33 18\"><path d=\"M21.183 12.174H11.97v4.39a.64.64 0 0 1-1.044.494L.824 9.208a.639.639 0 0 1-.113-.896C3.042 5.981 8.1 2.545 10.939.339a.639.639 0 0 1 1.03.504l.002 4.39h9.212V.843a.64.64 0 0 1 1.044-.494l10.103 7.85a.639.639 0 0 1 .113.896c-2.33 2.33-7.39 5.767-10.228 7.973a.64.64 0 0 1-1.03-.505l-.002-4.389z\"/></svg>;\n\n \nconst CustomSidebarWidthPlugin = () => (\n    <Fragment>\n        <PluginSidebarMoreMenuItem target=\"plugin-sidebar-width\" icon={ arrow_icon }>\n        {__(\"Sidebar width\", \"cesw\")}\n        </PluginSidebarMoreMenuItem>\n        <PluginSidebar name=\"plugin-sidebar-width\" title={ __(\"Sidebar width\", \"cesw\") } icon={ arrow_icon }>\n            <Panel>\n                <PanelBody>\n                    <SidebarWidthRangeControl initialValue={initialWidthValue}></SidebarWidthRangeControl>\n                </PanelBody>\n            </Panel>\n        </PluginSidebar>\n    </Fragment>\n);\n \nregisterPlugin( 'plugin-sidebar-width', { render: CustomSidebarWidthPlugin } );"],"sourceRoot":""}